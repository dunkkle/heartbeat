<!DOCTYPE html>
<html>
<head>
	<title>heart beats</title>

	<!--  Sources -->
	<!-- 
		https://github.com/daneden/animate.css/blob/master/animate.css 
		https://css-tricks.com/examples/ShapesOfCSS/
		https://css-tricks.com/snippets/css/a-guide-to-flexbox/
		http://stackoverflow.com/questions/8473162/how-do-i-set-height-of-container-div-to-100-of-window-height
		https://github.com/aterrien/jQuery-Knob
		-->

	<link href="https://fonts.googleapis.com/css?family=Dawning+of+a+New+Day" rel="stylesheet">
	<link href="https://fonts.googleapis.com/css?family=Dosis:200" rel="stylesheet">

	<style type="text/css" id="0">

		/* Basic Layout */

		body {
			background-color: #232323;
			height: 100vh;
		}
		
		.main-container {
			height: 100%;
			display: flex;
			align-items: center;
			justify-content: center;
			flex-direction: column;
		}

		.heart-container {
			width: 300px;
			height: 200px;
			display: flex;
			justify-content: center;
		}

		.text-container {
			height: 100px;
			width: 300px;
			color: white;
			color: #F4F2F6;
			text-align: center;
			font-family: 'Dosis', sans-serif;
			font-size: 20px;
		}

		.dial-container {
			font-size: 20px;
			bottom: 0;
		}


		/* Heart */

		@keyframes colorchange {
			from {
				background: dodgerblue;
			}

			to {
				background: #F364B4;
			}
		}

		#heart {
		    position: relative;
		    width: 100px;
		    height: 90px;
		    align-self: center;
		}
		#heart:before,
		#heart:after {
		    position: absolute;
		    content: "";
		    left: 50px;
		    top: 0;
		    width: 50px;
		    height: 80px;
		    background: #F364B4;
		    -moz-border-radius: 50px 50px 0 0;
		    border-radius: 50px 50px 0 0;
		    -webkit-transform: rotate(-45deg);
		       -moz-transform: rotate(-45deg);
		        -ms-transform: rotate(-45deg);
		         -o-transform: rotate(-45deg);
		            transform: rotate(-45deg);
		    -webkit-transform-origin: 0 100%;
		       -moz-transform-origin: 0 100%;
		        -ms-transform-origin: 0 100%;
		         -o-transform-origin: 0 100%;
		            transform-origin: 0 100%;
		            -webkit-animation-name: colorchange;
			animation-name: colorchange;
			-webkit-animation-duration: 1.1s;
			animation-duration: 1.1s;
			-webkit-animation-fill-mode: both;
			animation-fill-mode: both;
			-webkit-animation-iteration-count: infinite;
			animation-iteration-count: infinite;
		}
		#heart:after {
		    left: 0;
		    -webkit-transform: rotate(45deg);
		       -moz-transform: rotate(45deg);
		        -ms-transform: rotate(45deg);
		         -o-transform: rotate(45deg);
		            transform: rotate(45deg);
		    -webkit-transform-origin: 100% 100%;
		       -moz-transform-origin: 100% 100%;
		        -ms-transform-origin: 100% 100%;
		         -o-transform-origin: 100% 100%;
		            transform-origin: 100% 100%;
		}


		/* Animation Basics */

		.animated {
		  -webkit-animation-duration: 1.1s;
		  animation-duration: 1.1s;
		  -webkit-animation-fill-mode: both;
		  animation-fill-mode: both;
		}

		.animated.infinite {
		  -webkit-animation-iteration-count: infinite;
		  animation-iteration-count: infinite;
		}

		/* Pulse Animation */
		/*	@-webkit-keyframes pulse {
			  from {
			    -webkit-transform: scale3d(1, 1, 1);
			    transform: scale3d(1, 1, 1);
			  }

			  27% {
			    -webkit-transform: scale3d(1.3, 1.3, 1.3);
			    transform: scale3d(1.3, 1.3, 1.3);
			  }

			  to {
			    -webkit-transform: scale3d(1, 1, 1);
			    transform: scale3d(1, 1, 1);
			  }
			}*/

		@keyframes pulse {
		  from {
		    -webkit-transform: scale3d(1, 1, 1);
		    transform: scale3d(1, 1, 1);
		    
		  }

		  27% {
		    -webkit-transform: scale3d(1.3, 1.3, 1.3);
		    transform: scale3d(1.3, 1.3, 1.3);
		  }

		  to {
		    -webkit-transform: scale3d(.95, 1, 1);
		    transform: scale3d(.95, 1, 1);
		  }
		}

		.pulse {
		  -webkit-animation-name: pulse;
		  animation-name: pulse;
		}

		@keyframes colorchange {
			from {
				background: #bf1c76;
			}

			9 % {
				background: #F364B4;
			}

			27% {
				background: #f24ba7;
			}

			to {
				background: #bf1c76;
			}
		}

	</style>

	 <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js"></script>
     <script src="/jquery.knob.min.js"></script>
</head>


<body>

<div class="main-container">
	
	<div class="heart-container">
		<div id="heart" class="animated infinite pulse colorchange"></div>
	</div>

	<div class="text-container">
		heartbeats
	</div>
	<div class="dial-container">
		<input type="text" class="dial" value=40 style="font-size: 30px;">
	</div>

</div>

<script type="text/javascript">
		$(".dial").knob({
	    'min':20,
	    'max':200,
	    'angleArc': 100,
	    'angleOffset': 310,
	    'lineCap': "round",
	    'inputColor': "#f2f2f2",
	    'fgColor': "#F364B4",
	    'displayInput': true,
	    'cursor': true,
	    'font': "Dosis",
	    'thickness': .15,
	    'width': 200,
	    'height': 100,
	    'release': function(value) {
	    	var beatsPerMinute = value;

	    	// round animationDuration to nearest tenth
	    	var beatsPerSecond = (Math.round((value / 60 ) * 10) / 10).toFixed(2);
	    	
	    	// animation duration  = seconds per beat!
	    	var animationDuration = (Math.round((1/beatsPerSecond) *10) / 10).toFixed(2) + "s";
	    	var animationDurationCSS = animationDuration + " !important";

	    	console.log(value);
	    	console.log("Animation Duration: " + animationDuration);
console.log(document.styleSheets[0]);
	    	
	    	var heartShape = document.getElementsByClassName("animated");

	    	heartShape[0].style.animationDuration = animationDuration;

	    	document.styleSheets[0].addRule('#heart:before, #heart:after','animation-duration:' +animationDurationCSS+ ' ;');



	    }
	});


</script>

</body>
</html>